%%% User tunables

%% base_priority and offset: chassis for the board to sit in.
% base priority: if the board displaces the model of the chassis or the other way around.
base_priority=0;

% offset on the whole layout to locate it relative to the simulation origin
offset.x = 0.0000;
offset.y = 0.0000;
offset.z = 0;

% void is the material used for: fill holes, cutouts in substrate, etc
void.name = 'AIR';
void.epsilon = 1.000000;
void.mue = 1.000000;
% void.kappa = kappa;
% void.sigma = sigma;

% how many points should be used to describe the round end of traces.
kludge.segments = 10;


%%% Board mesh, part 2
z_bottom_copper=3.0000
mesh.y=[27.6600 27.0100 26.1100 0.0000 0.8703 1.7407 2.6110 3.4813 4.3517 5.2220 6.0923 6.9627 7.8330 8.7033 9.5737 10.4440 11.3143 12.1847 13.0550 13.9253 14.7957 15.6660 16.5363 17.4067 18.2770 19.1473 20.0177 20.8880 21.7583 22.6287 23.4990 24.3693 25.2397 28.0600 28.0600 28.4598 28.8596 29.2594 29.6591 30.0589 30.4587 30.8585 31.2583 31.6581 32.0579 32.4576 32.8574 33.2572 33.6570 34.0568 34.4566 34.8564 35.2561 35.6559 36.0557 36.4555 36.8553 37.2551 37.6549 38.0547 38.4544 38.8542 39.2540 39.6538 40.0536 40.4534 40.8532 41.2529 41.6527 42.0525 42.4523 42.8521 43.2519 43.6517 44.0514 44.4512 44.8510 45.2508 45.6506 46.0504 46.4502 46.8499 47.2497 47.6495 48.0493 48.4491 48.8489 49.2487 49.6484 50.0482 50.4480 50.8478 51.2476 51.6474 52.0472 52.4469 52.8467 53.2465 53.6463 54.0461 54.4459 54.8457 55.2454 55.6452 56.0450 56.4448 56.8446 57.2444 57.6442 58.0440 58.4437 58.8435 59.2433 59.6433 59.6433 60.0421 60.4408 60.8395 61.2382 61.6369 62.0356 62.4344 62.8331 63.2318 63.6305 64.0292 64.4279 64.8267 65.2254 65.6241 66.0228 66.4215 66.8202 67.2190 67.6177 68.0164 68.4151 68.8138 69.2125 69.6113 70.0100 70.4087 70.8074 71.2061 71.6048 72.0036 72.4023 72.8010 73.1997 73.5984 73.9971 74.3959 74.7946 75.1933 75.5920 75.9907 76.3894 76.7882 77.1869 77.5856 77.9843 78.3830 78.7817 79.1805 79.5792 79.9779 80.3766 80.7753 81.1741 81.5728 81.9715 82.3702 82.7689 83.1676 83.5664 83.9651 84.3638 84.7625 85.1612 85.5599 85.9587 86.3574 86.7561 87.1548 87.5535 87.9522 88.3510 88.7497 89.1484 89.5471 89.9458 90.3445 90.7433 91.1433 91.1433 91.5403 91.9374 92.3344 92.7314 93.1284 93.5254 93.9224 94.3194 94.7165 95.1135 95.5105 95.9075 96.3045 96.7015 97.0985 97.4956 97.8926 98.2896 98.6866 99.0836 99.4806 99.8776 100.2747 100.6717 101.0687 101.4657 101.8627 102.2597 102.6567 103.0538 103.4508 103.8478 104.2448 104.6418 105.0388 105.4358 105.8329 106.2299 106.6269 107.0239 107.4209 107.8179 108.2149 108.6119 109.0090 109.4060 109.8030 110.2000 110.5970 110.9940 111.3910 111.7881 112.1851 112.5821 112.9791 113.3761 113.7731 114.1701 114.5672 114.9642 115.3612 115.7582 116.1552 116.5522 116.9492 117.3463 117.7433 117.8767 118.1433 118.2767 118.2767 118.6410 119.0053 119.3697 119.7340 120.0983 120.4627 120.8270 121.1913 121.5557 121.9200 121.9200 122.2389 122.5578 122.8767 123.2767 123.1000];
mesh.x=[27.4900 26.8400 25.9400 0.0000 0.8945 1.7890 2.6834 3.5779 4.4724 5.3669 6.2614 7.1559 8.0503 8.9448 9.8393 10.7338 11.6283 12.5227 13.4172 14.3117 15.2062 16.1007 16.9952 17.8896 18.7841 19.6786 20.5731 21.4676 22.3620 23.2565 24.1510 25.0455 27.8900 27.8900 28.2879 28.6857 29.0836 29.4815 29.8793 30.2772 30.6750 31.0729 31.4708 31.8686 32.2665 32.6644 33.0622 33.4601 33.8579 34.2558 34.6537 35.0515 35.4494 35.8473 36.2451 36.6430 37.0408 37.4387 37.8366 38.2344 38.6323 39.0302 39.4280 39.8259 40.2238 40.6216 41.0195 41.4173 41.8152 42.2131 42.6109 43.0088 43.4067 43.8045 44.2024 44.6002 44.9981 45.3960 45.7938 46.1917 46.5896 46.9874 47.3853 47.7831 48.1810 48.5789 48.9767 49.3746 49.7725 50.1703 50.5682 50.9661 51.3639 51.7618 52.1596 52.5575 52.9554 53.3532 53.7511 54.1490 54.5468 54.9447 55.3425 55.7404 56.1383 56.5361 56.9340 57.3319 57.7297 58.1276 58.5255 58.9233 59.3233 59.4233 59.8233 59.8233 60.2022 60.5811 60.9600 61.5567 61.9567 62.3567 62.3567 62.7518 63.1469 63.5420 63.9371 64.3322 64.7273 65.1224 65.5176 65.9127 66.3078 66.7029 67.0980 67.4931 67.8882 68.2833 68.6784 69.0736 69.4687 69.8638 70.2589 70.6540 71.0491 71.4442 71.8393 72.2344 72.6296 73.0247 73.4198 73.8149 74.2100 74.6051 75.0002 75.3953 75.7904 76.1856 76.5807 76.9758 77.3709 77.7660 78.1611 78.5562 78.9513 79.3464 79.7416 80.1367 80.5318 80.9269 81.3220 81.7171 82.1122 82.5073 82.9024 83.2975 83.6927 84.0878 84.4829 84.8780 85.2731 85.6682 86.0633 86.4584 86.8535 87.2487 87.6438 88.0389 88.4340 88.8291 89.2242 89.6193 90.0144 90.4095 90.8047 91.1998 91.5949 91.9900 91.9900 92.3900 93.0400 93.9400 94.8386 95.7372 96.6359 97.5345 98.4331 99.3317 100.2303 101.1290 102.0276 102.9262 103.8248 104.7234 105.6221 106.5207 107.4193 108.3179 109.2165 110.1152 111.0138 111.9124 112.8110 113.7096 114.6083 115.5069 116.4055 117.3041 118.2027 119.1014 120.0000];
mesh.z=[0.0000 0.2500 0.5000 0.7500 1.0000 1.2500 1.5000 1.7500 2.0000 2.2500 2.5000 2.7500 3.0000 -4.0000 -3.3333 -2.6667 -2.0000 -1.3333 -0.6667 3.0000 3.6667 4.3333 5.0000 5.6667 6.3333];
mesh.x = mesh.x .+ offset.x;
mesh.y = offset.y .- mesh.y;
mesh.z = z_bottom_copper .- mesh.z .+ offset.z;
CSX = DefineRectGrid(CSX, unit, mesh);

%%% Layer mapping
layers(1).number = 1;
layers(1).name = 'top_copper';
layers(1).clearn = 0;
layer_types(1).name = 'COPPER_1';
layer_types(1).subtype = 2;
layer_types(1).thickness = 0.0/1000;
layer_types(1).conductivity = 56*10^6;

layers(2).number = 2;
layers(2).name = 'grp_4';
layers(2).clearn = 0;
layer_types(2).name = 'SUBSTRATE_2';
layer_types(2).subtype = 3;
layer_types(2).thickness = 1.5;
layer_types(2).epsilon = 3.66;
layer_types(2).mue = 0;
layer_types(2).kappa = 0;
layer_types(2).sigma = 0;

layers(3).number = 3;
layers(3).name = 'grp_12';
layers(3).clearn = 0;
layer_types(3).name = 'SUBSTRATE_3';
layer_types(3).subtype = 3;
layer_types(3).thickness = 1.5;
layer_types(3).epsilon = 3.66;
layer_types(3).mue = 0;
layer_types(3).kappa = 0;
layer_types(3).sigma = 0;

layers(4).number = 4;
layers(4).name = 'bottom_copper';
layers(4).clearn = 0;
layer_types(4).name = 'COPPER_4';
layer_types(4).subtype = 2;
layer_types(4).thickness = 0.0/1000;
layer_types(4).conductivity = 56*10^6;


%%% Initialize pcb2csx
PCBRND = InitPCBRND(layers, layer_types, void, base_priority, offset, kludge);
CSX = InitPcbrndLayers(CSX, PCBRND);

%%% Board outline
outline_xy(1, 1) = 0; outline_xy(2, 1) = 0;
outline_xy(1, 2) = 120.0000; outline_xy(2, 2) = 0;
outline_xy(1, 3) = 120.0000; outline_xy(2, 3) = -123.1000;
outline_xy(1, 4) = 0; outline_xy(2, 4) = -123.1000;
CSX = AddPcbrndPoly(CSX, PCBRND, 2, outline_xy, 1);
CSX = AddPcbrndPoly(CSX, PCBRND, 3, outline_xy, 1);

%%% Copper objects
poly0_xy(1, 1) = 60.4600; poly0_xy(2, 1) = -121.4200;
poly0_xy(1, 2) = 60.4600; poly0_xy(2, 2) = -122.4200;
poly0_xy(1, 3) = 61.4600; poly0_xy(2, 3) = -122.4200;
poly0_xy(1, 4) = 61.4600; poly0_xy(2, 4) = -121.4200;
CSX = AddPcbrndPoly(CSX, PCBRND, 4, poly0_xy, 1);
poly1_xy(1, 1) = 27.8900; poly1_xy(2, 1) = -59.5100;
poly1_xy(1, 2) = 27.9900; poly1_xy(2, 2) = -59.5100;
poly1_xy(1, 3) = 59.4400; poly1_xy(2, 3) = -28.0600;
poly1_xy(1, 4) = 91.9900; poly1_xy(2, 4) = -60.6100;
poly1_xy(1, 5) = 60.4900; poly1_xy(2, 5) = -92.1100;
CSX = AddPcbrndPoly(CSX, PCBRND, 1, poly1_xy, 1);
poly2_xy(1, 1) = 62.0900; poly2_xy(2, 1) = -118.0100;
poly2_xy(1, 2) = 62.0900; poly2_xy(2, 2) = -123.0100;
poly2_xy(1, 3) = 59.1900; poly2_xy(2, 3) = -123.0100;
poly2_xy(1, 4) = 59.1900; poly2_xy(2, 4) = -118.0100;
CSX = AddPcbrndPoly(CSX, PCBRND, 1, poly2_xy, 1);
poly3_xy(1, 1) = 59.6900; poly3_xy(2, 1) = -91.0100;
poly3_xy(1, 2) = 61.6900; poly3_xy(2, 2) = -91.0100;
poly3_xy(1, 3) = 61.6900; poly3_xy(2, 3) = -118.0100;
poly3_xy(1, 4) = 59.6900; poly3_xy(2, 4) = -118.0100;
CSX = AddPcbrndPoly(CSX, PCBRND, 1, poly3_xy, 1);
poly4_xy(1, 1) = 60.4600; poly4_xy(2, 1) = -121.4200;
poly4_xy(1, 2) = 60.4600; poly4_xy(2, 2) = -122.4200;
poly4_xy(1, 3) = 61.4600; poly4_xy(2, 3) = -122.4200;
poly4_xy(1, 4) = 61.4600; poly4_xy(2, 4) = -121.4200;
CSX = AddPcbrndPoly(CSX, PCBRND, 1, poly4_xy, 1);
%%% Port(s) on terminals
